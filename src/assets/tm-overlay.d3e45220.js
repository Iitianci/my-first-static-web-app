import{q as t,u as e,v as o,a0 as a,x as n,z as l,ae as i,y as s,o as u,c as r,E as p,D as c,w as d,b as f,G as h,a5 as v,a2 as m,f as y,aC as g,j as x}from"./index-f5cba0e4.js";import{c as b,u as w,e as C,a as O}from"./uni-app.es.62a9cda9.js";import{u as _}from"./useWindowInfo.47d82cea.js";import{_ as k}from"./_plugin-vue_export-helper.1b428a4d.js";const B=k(t({__name:"tm-overlay",props:{...b,align:{type:String,default:"flex-col-center-center"},bgColor:{type:String,default:"rgba(0,0,0,0.24)"},zIndex:{type:[Number,String],default:999},show:{type:Boolean,default:!1},overlayClick:{type:Boolean,default:!0},transprent:{type:[Boolean,String],default:!1},duration:{type:Number,default:300},contentAnimation:{type:Boolean,default:!1},inContent:{type:Boolean,default:!1},teleport:{type:Boolean,default:!0}},emits:["click","open","close","update:show"],setup(t,{expose:b,emit:k}){var B;const N=t,T=w();null==(B=e())||B.proxy;const I=C(N),j=O(N),z=_();o(!1),uni.$tm.u.getUid(1);let A=NaN;o(null);const S=o(!1),D=o(!1);a((()=>clearTimeout(A)));const P=n((()=>N.align)),$=n((()=>!N.bgColor||N.transprent?"rgba(0,0,0,0)":N.bgColor||"rgba(0,0,0,0.24)")),q=o(N.inContent),E=o(!1);let G=!1;function J(t){try{t.stopPropagation(),t.stopImmediatePropagation()}catch(e){}A&&(clearTimeout(A),A=NaN),k("click",t),N.overlayClick&&L(!1)}function L(t){1==t&&i(),function(t=!1){if(S.value==t)return;!function(t,e=500,o=!0){o?G||(G=!0,"function"==typeof t&&t(),setTimeout((()=>{G=!1}),e)):G||(G=!0,setTimeout((()=>{G=!1,"function"==typeof t&&t()}),e))}((function(){0==t?(D.value=!1,setTimeout((function(){S.value=t,k("close"),k("update:show",!1)}),N.duration+10)):(S.value=!0,setTimeout((function(){D.value=!0}),10),k("open"),setTimeout((function(){k("update:show",!0)}),N.duration))}),N.duration+10,!0)}(t)}return l((()=>{N.show&&L(N.show)})),s((()=>N.show),(t=>{L(t)})),b({close:function(){A&&(clearTimeout(A),A=NaN),L(!1)},open:L}),(e,o)=>{const a=x;return u(),r(g,{to:"body",disabled:!N.teleport},[S.value?(u(),r(a,{key:0,class:"l-0 t-0",style:p([q.value&&!E.value?{width:"100%",height:"100%",top:"0px",position:"absolute"}:{width:c(z).width+"px",height:c(z).height+"px",top:"0px",position:"fixed"},t.zIndex?{zIndex:t.zIndex}:""])},{default:d((()=>{var t,o;return[f(a,{ref:"overlay",class:h([c($)&&!N.transprent&&D.value?"blurOnOpacity":"blurOffOpacity","overlay",(null==(t=c(T).tmuiConfig)?void 0:t.themeConfig.overflowBlur)&&c($)&&!N.transprent&&D.value?"blurOn":"",(null==(o=c(T).tmuiConfig)?void 0:o.themeConfig.overflowBlur)&&c($)&&!N.transprent&&!D.value?"blurOff":""]),style:p([c($)&&!N.transprent?{backgroundColor:S.value?c($):""}:"",q.value&&!E.value?{width:"100%",height:"100%"}:{width:c(z).width+"px",height:c(z).height+"px"},{transitionDuration:N.duration+"ms"}])},null,8,["class","style"]),f(a,{onClick:v(J,["stop"]),class:h([c(P)," absolute flex flex-col  l-0 t-0 ",c(j),N.contentAnimation?"overlay":"",N.contentAnimation&&D.value?"blurOnOpacity ":"",N.contentAnimation&&!D.value?"blurOffOpacity overlay":""]),style:p([q.value&&!E.value?{width:"100%",height:"100%",top:"0px"}:{width:c(z).width+"px",height:c(z).height+"px"},c(I)])},{default:d((()=>[m(e.$slots,"default",{},void 0,!0)])),_:3},8,["onClick","class","style"])]})),_:3},8,["style"])):y("",!0)],8,["disabled"])}}}),[["__scopeId","data-v-0a8150e1"]]);export{B as t};
