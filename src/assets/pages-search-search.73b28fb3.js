import{_ as t}from"./tm-input.4c1b57bc.js";import{W as e,o as i,c as o,w as a,b as s,d as l,r as n,F as _,f as r,e as c,h,j as d,k as m}from"./index-f5cba0e4.js";import{r as p}from"./uni-app.es.62a9cda9.js";import{_ as u}from"./tm-message.42d12b93.js";import{_ as g}from"./tm-skeleton-line.9799a71e.js";import{_ as f}from"./tm-sheet.38d3d718.js";import{_ as k}from"./tm-icon.ed97db34.js";import{_ as y}from"./tm-app.c7c4bc54.js";import{c as w}from"./api.f04a1197.js";import{s as x}from"./sticker-card.b881b449.js";import{_ as j}from"./_plugin-vue_export-helper.1b428a4d.js";import"./tm-text.d010834d.js";import"./tm-button.37a1a22f.js";import"./useWindowInfo.47d82cea.js";import"./useTheme.d1454919.js";const v=j({components:{stickerCard:x},data:()=>({vk:uni.vk,search_key:"哈哈",search_type:"sticker",is_fixed:!1,dbName:"sticker",matetial_type:"sticker",choose_list_drawer_show:!1,first_loding:!0,action:"view",up_tips_show:!0,choose_show:!1,hideBtn:!1,is_full:!1,is_loading:!1,current_cid:1,current_index:1,current_id:"",current_zh_type:"全部",current_item:{},windowHeight:"",material_item:{item_list:[]},scrollTop:0,show_to_top:!1,nickname_list:[],avatar_list:[],can_max_choose:100}),computed:{},onPageScroll(t){t.scrollTop>200?this.show_to_top=!0:this.show_to_top=!1},onReachBottom(){this.get_data_list()},methods:{async to_search(t){this.material_item.item_list=[],this.search_key=t,this.is_loadding=!0,this.get_data_list()},async get_data_list(t="title"){let e=await w(this.search_type,{[t]:this.search_key},20);if(console.log("dataRes",e),0==e.code&&null!=e.data){let t=e.data;console.log("img_data",t),this.material_item.item_list=[...this.material_item.item_list,...t]}else if(0==e.code&&null==e.data)return;this.is_loadding=!1},finish_download(t){console.log("下载完成",t)},to_top(){e({scrollTop:0,duration:300})}},async onLoad(t){this.windowHeight=uni.vk.getVuex("$sys.sys.windowHeight")*uni.vk.getVuex("$sys.sys.devicePixelRatio")+"rpx",this.first_loding=!0,this.action=t.action||"view",(null==t?void 0:t.search_key)&&(this.search_key=t.search_key,this.search_type=t.search_type||this.search_type,await this.to_search(this.search_key)),this.first_loding=!1}},[["render",function(e,w,x,j,v,C){const T=p(h("tm-input"),t),b=d,z=p(h("tm-message"),u),V=p(h("tm-skeleton-line"),g),H=p(h("tm-sheet"),f),S=m("sticker-card"),B=m("avatar-card"),I=m("gallery-card"),L=m("wallpaperCard"),P=p(h("tm-icon"),k),R=p(h("tm-app"),y);return i(),o(R,null,{default:a((()=>[s(b,{class:"my-20 fixed r-0 t-0",style:{width:"750rpx"}},{default:a((()=>[s(T,{searchWidth:160,height:90,fontSize:32,onSearch:C.to_search,prefix:"tmicon-search",searchLabel:"搜索",modelValue:v.search_key,"onUpdate:modelValue":w[0]||(w[0]=t=>v.search_key=t),modelModifiers:{lazy:!0}},null,8,["onSearch","modelValue"])])),_:1}),s(z,{ref:"toast"},null,512),s(b,null,{default:a((()=>[v.first_loding?(i(),l(_,{key:0},n(10,((t,e)=>s(b,null,{default:a((()=>[s(H,{_class:"shadow-1 round-5",class:"round-5",padding:[20,30],margin:[25,10]},{default:a((()=>[s(b,{class:"flex flex-row flex-center"},{default:a((()=>[(i(),l(_,null,n(3,(t=>s(b,{class:"ma-10",style:{width:"210rpx"}},{default:a((()=>[s(V,{height:175,width:175})])),_:1}))),64))])),_:1})])),_:1})])),_:1}))),64)):(i(),o(b,{key:1},{default:a((()=>["sticker"==v.search_type?(i(),o(S,{key:0,material_item:v.material_item,first_loding:v.first_loding,onClick_down:e.click_down,onTo_change_choose:e.to_change_choose,action:v.action},null,8,["material_item","first_loding","onClick_down","onTo_change_choose","action"])):r("",!0),"avatar"==v.search_type?(i(),o(B,{key:1,material_item:v.material_item,first_loding:v.first_loding,onClick_down:e.click_down,onTo_change_choose:e.to_change_choose,action:v.action},null,8,["material_item","first_loding","onClick_down","onTo_change_choose","action"])):r("",!0),"gallery"==v.search_type?(i(),o(I,{key:2,material_item:v.material_item,first_loding:v.first_loding,onClick_down:e.click_down,onTo_change_choose:e.to_change_choose,action:v.action},null,8,["material_item","first_loding","onClick_down","onTo_change_choose","action"])):r("",!0),"wallpaper"==v.search_type?(i(),o(L,{key:3,material_item:v.material_item,first_loding:v.first_loding,onChange_full_status:e.change_full_status,onClick_down:e.click_down,onTo_change_choose:e.to_change_choose,action:v.action},null,8,["material_item","first_loding","onChange_full_status","onClick_down","onTo_change_choose","action"])):r("",!0)])),_:1}))])),_:1}),v.is_loading?(i(),o(b,{key:0,style:{"margin-bottom":"250rpx"}},{default:a((()=>[c("> "),s(P,{spin:"","font-size":50,name:"tmicon-loading",color:"blue"})])),_:1})):r("",!0)])),_:1})}],["__scopeId","data-v-e2b5b03d"]]);export{v as default};
